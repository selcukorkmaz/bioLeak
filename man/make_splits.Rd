% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_splits.R
\name{make_splits}
\alias{make_splits}
\title{Create leakage-resistant splits (enhanced)}
\usage{
make_splits(
  x,
  outcome = NULL,
  mode = c("subject_grouped", "batch_blocked", "study_loocv", "time_series"),
  group = NULL,
  batch = NULL,
  study = NULL,
  time = NULL,
  v = 5,
  repeats = 1,
  stratify = FALSE,
  nested = FALSE,
  seed = 1,
  horizon = 0,
  progress = TRUE
)
}
\arguments{
\item{x}{SummarizedExperiment or data.frame/matrix (samples x features).
If SummarizedExperiment, metadata are taken from colData(x). If data.frame,
metadata are taken from x (columns referenced by \code{group}, \code{batch}, \code{study}, \code{time}, \code{outcome}).}

\item{outcome}{character, outcome column name (used for stratification).}

\item{mode}{one of "subject_grouped","batch_blocked","study_loocv","time_series".}

\item{group}{optional subject/group id column (for subject_grouped). If NULL,
each sample is treated as its own group (plain k-fold CV).}

\item{batch}{batch/plate/center column (for batch_blocked).}

\item{study}{study id column (for study_loocv).}

\item{time}{time column (numeric or POSIXct) for time_series.}

\item{v}{integer, number of folds (k) or rolling partitions.}

\item{repeats}{integer, number of repeats (>=1) for non-LOOCV modes.}

\item{stratify}{logical, keep outcome proportions similar across folds.
For grouped modes, stratification is applied at the group level (by
majority class per group) if \code{outcome} is provided; otherwise ignored.}

\item{nested}{logical, whether to attach inner CV splits (per outer fold)
using the same \code{mode} on the outer training set (with \code{v} folds, 1 repeat).}

\item{seed}{integer seed.}

\item{horizon}{numeric (>=0), minimal time gap for time_series so that the
training set only contains samples with time <= min(test_time) - horizon.}

\item{progress}{logical, print progress for large jobs.}
}
\value{
LeakSplits S4 object
}
\description{
Generates leakage-safe cross-validation splits for common biomedical setups:
subject-grouped, batch-blocked, study leave-one-out, and time-series
rolling-origin. Supports repeats, optional stratification, nested inner CV,
and an optional prediction horizon for time series.
}
